<aside class="w-full h-full">
  <section class="message-title pt-4 px-2" #titleSection>
    <span class="text-2xl pt-0">Messages (10)</span>
  </section>
  <section class="w-full mt-3 px-2" #categorySection>
    @for (item of messageCategoies(); track $index) {
    <p-chip
      label="{{ item.label }}"
      pRipple
      [class.selected]="selectedMessageCategory()?.index === $index"
      class="mr-2 cursor-pointer transition-duration-200 min-w-max"
      (click)="onSelectMessageCategory(item, $index)"
    />
    }
  </section>
  <section class="w-full my-2 px-2">
    <p-iconField iconPosition="right">
      @if(searching()){
      <p-inputIcon styleClass="pi pi-spinner pi-spin" />
      } @else {
      <p-inputIcon styleClass="pi pi-search" />
      }
      <input
        type="text"
        pInputText
        [formControl]="searchControl"
        placeholder="Typing user or message..."
        class="py-2 transition-duration-300 h-3rem text-base text-color surface-ground p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
      />
    </p-iconField>
  </section>
  <section
    class="flex flex-column gap-2 mt-2 overflow-y-auto py-2 hidden-scrollbar"
    [style.height]="'calc(100% - 150px)'"
  >
    @for (item of conversations(); track $index) {
    <section
      (click)="onSelectConversation(item, $index)"
      class="w-full flex column-gap-2 min-h-max hover:bg-gray-800 {{
        selectedConversation()?.index === $index ? 'bg-gray-800' : 'bg-gray-900'
      }} py-2 px-2 border-round-md cursor-pointer  transition-duration-200"
    >
      @if(item.lastMessage.avatarUrl){
      <p-avatar
        [image]="item.lastMessage.avatarUrl"
        size="large"
        shape="circle"
      ></p-avatar>

      } @else {
      <p-avatar label="P" size="large" shape="circle"></p-avatar>
      }
      <section class="w-full">
        <span class="flex-1">{{ item.lastMessage.fullName }}</span>
        <div class="mt-2 flex w-full">
          <span class="flex-1 text-xs">{{ item.lastMessage.content }}</span>
          <span class="text-xs">{{
            item.lastMessage.timeSend | date : 'medium'
          }}</span>
        </div>
      </section>
    </section>
    }
  </section>
</aside>
